<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HAYATÄ° KÄ°MLÄ°K | ULTRA</title>
    <style>
        /* --- OPTÄ°MÄ°ZE EDÄ°LMÄ°Å CSS (Kasma Yapmaz) --- */
        :root {
            --bg: #050505;
            --panel: #111;
            --blue: #00f3ff;
            --red: #ff003c;
            --green: #00ff9d;
            --gold: #ffd700;
            --text: #eee;
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; outline: none; font-family: 'Courier New', monospace; }

        body {
            margin: 0; padding: 0; background-color: var(--bg); color: var(--text);
            height: 100vh; overflow: hidden; display: flex; justify-content: center; align-items: center;
        }

        /* Ekran YÃ¶netimi */
        .screen {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
            display: none; flex-direction: column; padding: 15px;
            background: var(--bg); overflow-y: auto; z-index: 1;
        }
        .active { display: flex; animation: fade 0.3s; }

        /* Kart TasarÄ±mÄ± */
        .card {
            background: rgba(255,255,255,0.05); border: 1px solid #333;
            border-radius: 15px; padding: 20px; text-align: center;
            margin-bottom: 15px; backdrop-filter: blur(5px);
        }
        .avatar {
            width: 100px; height: 100px; border-radius: 50%;
            border: 3px solid var(--blue); object-fit: cover;
            margin-top: -10px; background: #222;
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
        }

        /* Butonlar */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .btn {
            background: linear-gradient(145deg, #1a1a1a, #222);
            border: 1px solid #444; color: white; padding: 15px;
            border-radius: 12px; font-weight: bold; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
            transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); border-color: var(--blue); }
        .icon { font-size: 22px; margin-bottom: 5px; }

        .sos-btn {
            background: linear-gradient(45deg, #cc0000, #ff003c);
            width: 100%; border: none; padding: 18px; border-radius: 50px;
            color: white; font-size: 20px; font-weight: bold; letter-spacing: 2px;
            box-shadow: 0 0 20px rgba(255, 0, 60, 0.4);
            animation: pulse 1.5s infinite; margin-top: auto;
        }

        /* Parmak Ä°zi TarayÄ±cÄ± */
        .fingerprint-area {
            width: 80px; height: 80px; border: 2px dashed var(--blue);
            border-radius: 50%; margin: 20px auto;
            display: flex; justify-content: center; align-items: center;
            font-size: 40px; color: var(--blue); cursor: pointer;
            position: relative; overflow: hidden;
        }
        .scan-line {
            position: absolute; width: 100%; height: 2px; background: var(--blue);
            top: 0; animation: scan 1.5s infinite linear; display: none;
        }
        .fingerprint-area:active .scan-line { display: block; }

        /* Admin & Edit */
        .editable { border-bottom: 1px dashed var(--gold); color: var(--gold); }
        .input-box {
            background: #111; border: 1px solid var(--blue); color: var(--blue);
            padding: 15px; width: 100%; text-align: center; font-size: 18px;
            border-radius: 10px; margin-bottom: 20px; letter-spacing: 5px;
        }

        /* Animasyonlar */
        @keyframes fade { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        
        /* Chat */
        .chat-box { flex: 1; overflow-y: auto; background: #080808; border: 1px solid #222; border-radius: 10px; padding: 10px; margin-bottom: 10px; }
        .msg { padding: 10px; margin-bottom: 8px; border-radius: 5px; font-size: 13px; max-width: 85%; }
        .bot { background: #1a1a2e; border-left: 3px solid var(--blue); color: #ccc; align-self: flex-start; }
        .user { background: #0f2e1a; border-right: 3px solid var(--green); color: white; margin-left: auto; text-align: right; }
        .opt-btn { width: 100%; padding: 12px; background: #111; border: 1px solid #333; color: var(--blue); margin-top: 5px; text-align: left; border-radius: 5px; }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="mainScreen" class="screen active">
        <div style="display:flex; justify-content:space-between; padding:0 10px;">
            <div style="font-size:12px; color:gray;">SÄ°STEM: ONLÄ°NE</div>
            <div onclick="showAuth('admin')" style="font-size:20px;">âš™ï¸</div>
        </div>

        <div class="card" style="margin-top:10px;">
            <img src="https://via.placeholder.com/100" class="avatar" id="d_img">
            <h2 id="d_name" style="margin: 10px 0;">YÃœKLENÄ°YOR...</h2>
            <div class="tag" id="d_dis" style="border-color:var(--red); color:var(--red)">...</div>
            <div class="tag" id="d_bld" style="border-color:var(--blue); color:var(--blue)">...</div>
        </div>

        <div class="grid">
            <div class="btn" onclick="callContact(0)">
                <span class="icon">ğŸ“</span> <span id="lbl_c1">ANNE</span>
            </div>
            <div class="btn" onclick="startAI()">
                <span class="icon">ğŸ§ </span> AI TRÄ°YAJ
            </div>
            <div class="btn" onclick="showAuth('private')">
                <span class="icon">ğŸ”’</span> Ã–ZEL BÄ°LGÄ°
            </div>
            <div class="btn" onclick="sendRealSMS()">
                <span class="icon">ğŸ“</span> KONUM AT
            </div>
        </div>

        <button class="sos-btn" onclick="window.location.href='tel:112'">ğŸ†˜ 112 ACÄ°L</button>
    </div>

    <div id="authScreen" class="screen" style="justify-content:center; text-align:center;">
        <h2 id="authTitle" style="color:var(--blue)">GÃœVENLÄ°K KONTROLÃœ</h2>
        
        <div id="fingerAuth" class="hidden">
            <p>EriÅŸim iÃ§in parmaÄŸÄ±nÄ±zÄ± basÄ±lÄ± tutun</p>
            <div class="fingerprint-area" ontouchstart="startScan()" ontouchend="stopScan()" onmousedown="startScan()" onmouseup="stopScan()">
                <div class="scan-line"></div>
                ğŸ‘†
            </div>
            <div id="scanStatus" style="color:gray; font-size:12px; height:20px;">Bekleniyor...</div>
        </div>

        <div id="passAuth" class="hidden">
            <p>YÃ¶netici Åifresi Girin</p>
            <input type="password" id="passInput" class="input-box" placeholder="â€¢â€¢â€¢â€¢">
            <button class="btn" style="width:100%; justify-content:center;" onclick="checkAdmin()">GÄ°RÄ°Å</button>
        </div>

        <button class="btn" style="margin-top:20px; border-color:var(--red); color:var(--red);" onclick="goHome()">Ä°PTAL</button>
    </div>

    <div id="privateScreen" class="screen">
        <h2 style="color:var(--gold); text-align:center;">GÄ°ZLÄ° HASTA DOSYASI</h2>
        <div class="card" style="text-align:left;">
            <p><strong>TC KÄ°MLÄ°K:</strong> <span id="p_tc">...</span></p>
            <p><strong>SÄ°GORTA:</strong> <span id="p_ins">...</span></p>
            <p><strong>Ã–ZEL NOT:</strong> <span id="p_note">...</span></p>
            <p><strong>Ä°LAÃ‡LAR:</strong> <span id="p_meds">...</span></p>
        </div>
        <button class="btn" onclick="goHome()">KAPAT</button>
    </div>

    <div id="adminScreen" class="screen">
        <h2 style="color:var(--red); text-align:center;">YÃ–NETÄ°CÄ° DÃœZENLEME</h2>
        <div style="font-size:11px; text-align:center; color:gray; margin-bottom:10px;">DeÄŸiÅŸtirmek istediÄŸiniz verinin Ã¼zerine tÄ±klayÄ±p yazÄ±n.</div>
        
        <div class="card" style="text-align:left;">
            <p>AD SOYAD: <span id="e_name" contenteditable="true" class="editable"></span></p>
            <p>HASTALIK: <span id="e_dis" contenteditable="true" class="editable"></span></p>
            <p>KAN: <span id="e_bld" contenteditable="true" class="editable"></span></p>
            <hr style="border-color:#333">
            <p>TC NO: <span id="e_tc" contenteditable="true" class="editable"></span></p>
            <p>SÄ°GORTA: <span id="e_ins" contenteditable="true" class="editable"></span></p>
            <p>NOTLAR: <span id="e_note" contenteditable="true" class="editable"></span></p>
        </div>

        <div class="card" style="text-align:left;">
            <div style="color:var(--blue); margin-bottom:5px;">AÄ°LE NUMARALARI</div>
            <p>1. <span id="e_c1_name" contenteditable="true" class="editable"></span>: <span id="e_c1_tel" contenteditable="true" class="editable"></span></p>
            <p>2. <span id="e_c2_name" contenteditable="true" class="editable"></span>: <span id="e_c2_tel" contenteditable="true" class="editable"></span></p>
            <p>3. <span id="e_c3_name" contenteditable="true" class="editable"></span>: <span id="e_c3_tel" contenteditable="true" class="editable"></span></p>
        </div>

        <button class="btn" style="background:var(--green); color:black;" onclick="saveAll()">KAYDET</button>
        <button class="btn" style="margin-top:10px;" onclick="goHome()">Ä°PTAL</button>
    </div>

    <div id="aiScreen" class="screen">
        <h3 style="text-align:center; color:var(--blue); border-bottom:1px solid #333;">AI TRÄ°YAJ</h3>
        <div class="chat-box" id="chatBox"></div>
        <button class="btn" onclick="goHome()">Ã‡IKIÅ</button>
    </div>

    <script>
        /* --- VERÄ°TABANI (RAM) --- */
        // VarsayÄ±lan veriler. Admin panelinde deÄŸiÅŸtirilince burasÄ± gÃ¼ncellenir.
        let DB = {
            name: "TALHA YILMAZ",
            disease: "TÄ°P 1 DÄ°YABET",
            blood: "A Rh+",
            tc: "12345678901",
            insurance: "Allianz Ã–zel",
            note: "Glukagon iÄŸnesi dolapta. Ä°nsÃ¼lin pompasÄ± kullanÄ±yor.",
            meds: "Humalog, Lantus",
            contacts: [
                { name: "ANNE", tel: "05551112233" },
                { name: "BABA", tel: "05554445566" },
                { name: "DOKTOR", tel: "02124440000" }
            ]
        };

        /* --- BAÅLANGIÃ‡ --- */
        window.onload = () => {
            renderHome();
            // FotoÄŸrafÄ± rastgele bir insan yÃ¼zÃ¼ yapalÄ±m (Demo iÃ§in)
            document.getElementById('d_img').src = "https://thispersondoesnotexist.com/";
        };

        function goHome() {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('mainScreen').style.display = 'flex';
        }

        function renderHome() {
            document.getElementById('d_name').innerText = DB.name;
            document.getElementById('d_dis').innerText = "âš ï¸ " + DB.disease;
            document.getElementById('d_bld').innerText = DB.blood;
            document.getElementById('lbl_c1').innerText = DB.contacts[0].name;
        }

        /* --- GERÃ‡EK SMS FONKSÄ°YONU --- */
        function sendRealSMS() {
            // Bu kod telefonun kendi SMS uygulamasÄ±nÄ± aÃ§ar
            let msg = `ACÄ°L DURUM! ${DB.name} iÃ§in acil yardÄ±m gerekiyor. Konum: 41.0082, 28.9784 (Tahmini)`;
            let num = DB.contacts[0].tel; // Annenin numarasÄ±na atar
            
            // iPhone ve Android uyumlu link
            window.open(`sms:${num}?&body=${encodeURIComponent(msg)}`, '_self');
        }

        /* --- ARAMA --- */
        function callContact(idx) {
            window.location.href = `tel:${DB.contacts[idx].tel}`;
        }

        /* --- GÃœVENLÄ°K YÃ–NETÄ°MÄ° --- */
        let scanTimer;
        
        function showAuth(type) {
            document.getElementById('mainScreen').style.display = 'none';
            document.getElementById('authScreen').style.display = 'flex';
            document.getElementById('fingerAuth').classList.add('hidden');
            document.getElementById('passAuth').classList.add('hidden');

            if(type === 'private') {
                document.getElementById('authTitle').innerText = "BÄ°YOMETRÄ°K DOÄRULAMA";
                document.getElementById('fingerAuth').classList.remove('hidden');
            } else {
                document.getElementById('authTitle').innerText = "YÃ–NETÄ°CÄ° GÄ°RÄ°ÅÄ°";
                document.getElementById('passAuth').classList.remove('hidden');
            }
        }

        /* --- PARMAK Ä°ZÄ° SÄ°MÃœLASYONU --- */
        function startScan() {
            document.getElementById('scanStatus').innerText = "TaranÄ±yor... %20";
            document.getElementById('scanStatus').style.color = "var(--blue)";
            
            // BasÄ±lÄ± tutunca 1 saniye sonra aÃ§Ä±lÄ±r
            scanTimer = setTimeout(() => {
                document.getElementById('scanStatus').innerText = "DOÄRULANDI âœ”";
                document.getElementById('scanStatus').style.color = "var(--green)";
                if(navigator.vibrate) navigator.vibrate([50,50]);
                setTimeout(openPrivateData, 500);
            }, 1000);
        }

        function stopScan() {
            clearTimeout(scanTimer);
            document.getElementById('scanStatus').innerText = "BaÅŸarÄ±sÄ±z. Tekrar deneyin.";
            document.getElementById('scanStatus').style.color = "var(--red)";
        }

        function openPrivateData() {
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('privateScreen').style.display = 'flex';
            
            document.getElementById('p_tc').innerText = DB.tc;
            document.getElementById('p_ins').innerText = DB.insurance;
            document.getElementById('p_note').innerText = DB.note;
            document.getElementById('p_meds').innerText = DB.meds;
        }

        /* --- YÃ–NETÄ°CÄ° (ADMIN) --- */
        function checkAdmin() {
            let p = document.getElementById('passInput').value;
            if(p === "01Talha55") {
                loadAdminEditor();
                document.getElementById('authScreen').style.display = 'none';
                document.getElementById('adminScreen').style.display = 'flex';
                document.getElementById('passInput').value = "";
            } else {
                alert("HATALI ÅÄ°FRE!");
            }
        }

        function loadAdminEditor() {
            // Verileri editÃ¶re doldur
            document.getElementById('e_name').innerText = DB.name;
            document.getElementById('e_dis').innerText = DB.disease;
            document.getElementById('e_bld').innerText = DB.blood;
            document.getElementById('e_tc').innerText = DB.tc;
            document.getElementById('e_ins').innerText = DB.insurance;
            document.getElementById('e_note').innerText = DB.note;
            
            document.getElementById('e_c1_name').innerText = DB.contacts[0].name;
            document.getElementById('e_c1_tel').innerText = DB.contacts[0].tel;
            document.getElementById('e_c2_name').innerText = DB.contacts[1].name;
            document.getElementById('e_c2_tel').innerText = DB.contacts[1].tel;
            document.getElementById('e_c3_name').innerText = DB.contacts[2].name;
            document.getElementById('e_c3_tel').innerText = DB.contacts[2].tel;
        }

        function saveAll() {
            // EditÃ¶rden verileri Ã§ekip DB'ye kaydet
            DB.name = document.getElementById('e_name').innerText;
            DB.disease = document.getElementById('e_dis').innerText;
            DB.blood = document.getElementById('e_bld').innerText;
            DB.tc = document.getElementById('e_tc').innerText;
            DB.insurance = document.getElementById('e_ins').innerText;
            DB.note = document.getElementById('e_note').innerText;
            
            DB.contacts[0].name = document.getElementById('e_c1_name').innerText;
            DB.contacts[0].tel = document.getElementById('e_c1_tel').innerText;
            DB.contacts[1].name = document.getElementById('e_c2_name').innerText;
            DB.contacts[1].tel = document.getElementById('e_c2_tel').innerText;
            DB.contacts[2].name = document.getElementById('e_c3_name').innerText;
            DB.contacts[2].tel = document.getElementById('e_c3_tel').innerText;

            alert("KAYDEDÄ°LDÄ°!");
            renderHome();
            goHome();
        }

        /* --- ZEKÄ° AI --- */
        function startAI() {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('aiScreen').style.display = 'flex';
            document.getElementById('chatBox').innerHTML = "";
            aiMsg(`Merhaba. ${DB.name} iÃ§in acil durum analizi yapÄ±yorum. HastanÄ±n ÅŸu anki durumu nedir?`, [
                {t:"BAYGIN / HAREKETSÄ°Z", v:"baygin"},
                {t:"TÄ°TREME / NÃ–BET", v:"nobet"},
                {t:"BÄ°LÄ°NÃ‡ BULANIK / TERLÄ°", v:"seker"}
            ]);
        }

        function aiMsg(txt, opts) {
            let box = document.getElementById('chatBox');
            box.innerHTML += `<div class="msg bot">${txt}</div>`;
            if(opts) {
                opts.forEach(o => {
                    box.innerHTML += `<div class="opt-btn" onclick="aiReply('${o.v}')">â¤ ${o.t}</div>`;
                });
            }
            box.scrollTop = box.scrollHeight;
        }

        function aiReply(val) {
            let box = document.getElementById('chatBox');
            
            if(val === "baygin") {
                aiMsg("Nefes alÄ±yor mu? GÃ¶ÄŸÃ¼s hareketi var mÄ±?", [
                    {t:"EVET, ALIYOR", v:"nefes_var"},
                    {t:"HAYIR, ALMIYOR", v:"nefes_yok"}
                ]);
            } else if(val === "nefes_var") {
                aiMsg("âœ… Ä°YÄ°. HastayÄ± YAN Ã‡EVÄ°RÄ°N (Koma pozisyonu). Kusarsa boÄŸulmasÄ±n. 112'yi arayÄ±n.", null);
            } else if(val === "nefes_yok") {
                aiMsg("ğŸš¨ KIRMIZI ALARM! Kalp durmuÅŸ olabilir. Hemen KALP MASAJINA baÅŸlayÄ±n ve 112'yi arayÄ±n!", null);
            } 
            
            else if(val === "seker") {
                aiMsg("AÄŸzÄ±nda aseton (oje Ã§Ä±karÄ±cÄ±) gibi bir koku var mÄ±?", [
                    {t:"EVET, KOKUYOR", v:"keto"},
                    {t:"HAYIR, KOKMUYOR", v:"hipo"}
                ]);
            } else if(val === "keto") {
                aiMsg("âš ï¸ YÃœKSEK ÅEKER KOMAsÄ± olabilir. Ä°nsÃ¼lin gerekebilir. Su iÃ§irin ve 112'yi arayÄ±n.", null);
            } else if(val === "hipo") {
                aiMsg("âœ… ÅEKER DÃœÅMÃœÅ. Hemen meyve suyu veya kesme ÅŸeker verin. 15 dk bekleyin.", null);
            }
        }
    </script>
</body>
</html>
